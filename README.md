# home-music-stream

[English version (README.en.md)](./README.en.md)

**home-music-stream** は、PC内の音楽ライブラリを家庭内ネットワーク上のどのデバイスからでも手軽に再生できるように設計された、軽量で直感的な音楽ストリーミングサーバーです。

## 特徴

- **直感的なインターフェース:** アーティスト名やアルバム名でライブラリをブラウズできます。
- **即座に再生:** 聴きたい曲をその場ですぐに選択して再生できます。
- **PCから他端末へストリーミング:** PCにある音楽データを、スマホやタブレット、他のPCのブラウザから直接再生。デバイスごとに楽曲をコピーする手間が不要になります。
- **プレイリスト管理:** UIから直接プレイリストをサクッと作成・管理できます。
- **簡単アップロード:** ブラウザから楽曲やフォルダを直接ドラッグ＆ドロップ、またはダイアログ選択でサーバーへアップロードできます。
- **マルチデバイス対応:** 同一ネットワーク内であれば、どの端末からでも自分専用の音楽サーバーとして利用可能です。

## 開発の背景

既存の音楽サーバーは多機能すぎて重かったり、自分のPCにある楽曲フォルダの構造をそのまま直感的に扱えるものが少なかったりしました。
開発のきっかけは、個人的な以下の不満を解消したかったことにあります：

- **コピーの手間をなくしたい:** PCにメインの音楽データがあるのに、スマホや別のPCで聴くいために毎回データをコピーして同期するのが非常に面倒だった。
- **ストレージ容量の節約:** スマホの容量が足りず、入れる曲を厳選しては削除する作業に疲れていた。PCで一括管理してストリーミングすれば、スマホの容量を気にせず全ライブラリを「持ち運ぶ」ことができる。

「もっと手軽に、即座に、PCの中の曲を他の部屋やデバイスでも聴きたい」という思いから、本アプリを開発しました。

## 設定 (Configuration)

`.env`ファイルを作成することで、起動ポートや楽曲保存ディレクトリをカスタマイズできます。

1. `.env.example`を`.env`にコピーします。
2. 必要に応じて`.env`内の値を編集します。

主な設定項目:
- `PORT`: サーバーの起動ポート (デフォルト: 5000)
- `MUSIC_DIR`: 楽曲ファイルの保存ディレクトリ (デフォルト: static/music)
- `SECRET_KEY`: Flaskのセッション用シークレットキー
- `ADMIN_USERNAME`: 初期管理者ユーザー名
- `ADMIN_PASSWORD`: 初期管理者パスワード

## セットアップと使用方法

### 事前準備
- Python 3.x がインストールされていること。
- 音楽ファイル（MP3/WAV/FLAC/OGG/M4A）が `MUSIC_DIR` で指定したフォルダにあること。
  - **※WMA形式はブラウザのサポート状況により再生できないため、非対応です。**

### ディレクトリ構成
音楽ファイルは以下のルールで配置してください：
```
static/music/
  ├── アーティスト名/
  │   ├── アルバム名/
  │   │   ├── 曲名1.mp3
  │   │   └── 曲名2.mp3
```

### サーバーの起動

**Windowsの場合:**
`run.bat` をダブルクリックしてください。

**Linux/macOSの場合:**
以下のコマンドを実行してください：
```bash
chmod +x run.sh
./run.sh
```

スクリプトが自動的に仮想環境の構築、依存ライブラリのインストールを行い、サーバーを起動します。

### アプリへのアクセス
ブラウザを開き、以下のURLにアクセスしてください：
`http://localhost:5000` （またはホストマシンのIPアドレス）

### デフォルトのログイン情報
- **ユーザー名:** `admin`
- **パスワード:** `pass0000`

*注: 本番環境で使用する場合は、`app.py` 内の秘密鍵やデフォルトのパスワードを変更してください。*